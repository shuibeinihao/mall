define(["jquery","swiper","lazyload"],function(t,n,r){"use strict";function e(t,n){return n={exports:{}},t(n,n.exports),n.exports}function o(t){et||(et=ot()),et.find(".js-msg").html(t),et.fadeIn(),setTimeout(function(){et.fadeOut()},2e3)}t="default"in t?t.default:t,n="default"in n?n.default:n,r="default"in r?r.default:r;var i=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t},c=function(t){return Object(i(t))},a={}.hasOwnProperty,u=function(t,n){return a.call(t,n)},s={}.toString,l=function(t){return s.call(t).slice(8,-1)},p=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==l(t)?t.split(""):Object(t)},f=function(t){return p(i(t))},d=Math.ceil,h=Math.floor,v=function(t){return isNaN(t=+t)?0:(t>0?h:d)(t)},y=Math.min,m=function(t){return t>0?y(v(t),9007199254740991):0},g=Math.max,w=Math.min,b=function(t,n){return t=v(t),t<0?g(t+n,0):w(t,n)},_=e(function(t){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)}),k=_["__core-js_shared__"]||(_["__core-js_shared__"]={}),j=0,M=Math.random(),x=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++j+M).toString(36))},O=function(t){return k[t]||(k[t]={})}("keys"),T=function(t){return function(n,r,e){var o,i=f(n),c=m(i.length),a=b(e,c);if(t&&r!=r){for(;c>a;)if((o=i[a++])!=o)return!0}else for(;c>a;a++)if((t||a in i)&&i[a]===r)return t||a||0;return!t&&-1}}(!1),P=function(t){return O[t]||(O[t]=x(t))}("IE_PROTO"),E=function(t,n){var r,e=f(t),o=0,i=[];for(r in e)r!=P&&u(e,r)&&i.push(r);for(;n.length>o;)u(e,r=n[o++])&&(~T(i,r)||i.push(r));return i},S="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),I=Object.keys||function(t){return E(t,S)},C=e(function(t){var n=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)}),F=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},z=function(t,n,r){if(F(t),void 0===n)return t;switch(r){case 1:return function(r){return t.call(n,r)};case 2:return function(r,e){return t.call(n,r,e)};case 3:return function(r,e,o){return t.call(n,r,e,o)}}return function(){return t.apply(n,arguments)}},L=function(t){return"object"==typeof t?null!==t:"function"==typeof t},B=function(t){if(!L(t))throw TypeError(t+" is not an object!");return t},D=function(t){try{return!!t()}catch(t){return!0}},G=!D(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),H=_.document,R=L(H)&&L(H.createElement),N=function(t){return R?H.createElement(t):{}},W=!G&&!D(function(){return 7!=Object.defineProperty(N("div"),"a",{get:function(){return 7}}).a}),q=function(t,n){if(!L(t))return t;var r,e;if(n&&"function"==typeof(r=t.toString)&&!L(e=r.call(t)))return e;if("function"==typeof(r=t.valueOf)&&!L(e=r.call(t)))return e;if(!n&&"function"==typeof(r=t.toString)&&!L(e=r.call(t)))return e;throw TypeError("Can't convert object to primitive value")},A=Object.defineProperty,U=G?Object.defineProperty:function(t,n,r){if(B(t),n=q(n,!0),B(r),W)try{return A(t,n,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[n]=r.value),t},J={f:U},K=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}},Q=G?function(t,n,r){return J.f(t,n,K(1,r))}:function(t,n,r){return t[n]=r,t},V=function(t,n,r){var e,o,i,c=t&V.F,a=t&V.G,u=t&V.S,s=t&V.P,l=t&V.B,p=t&V.W,f=a?C:C[n]||(C[n]={}),d=f.prototype,h=a?_:u?_[n]:(_[n]||{}).prototype;a&&(r=n);for(e in r)(o=!c&&h&&void 0!==h[e])&&e in f||(i=o?h[e]:r[e],f[e]=a&&"function"!=typeof h[e]?r[e]:l&&o?z(i,_):p&&h[e]==i?function(t){var n=function(n,r,e){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(n);case 2:return new t(n,r)}return new t(n,r,e)}return t.apply(this,arguments)};return n.prototype=t.prototype,n}(i):s&&"function"==typeof i?z(Function.call,i):i,s&&((f.virtual||(f.virtual={}))[e]=i,t&V.R&&d&&!d[e]&&Q(d,e,i)))};V.F=1,V.G=2,V.S=4,V.P=8,V.B=16,V.W=32,V.U=64,V.R=128;var X=V;!function(t,n){var r=(C.Object||{})[t]||Object[t],e={};e[t]=n(r),X(X.S+X.F*D(function(){r(1)}),"Object",e)}("keys",function(){return function(t){return I(c(t))}});var Y=C.Object.keys,Z=e(function(t){t.exports={default:Y,__esModule:!0}}),$=function(t){return t&&t.__esModule?t.default:t}(Z),tt="ontouchstart"in window,nt=tt?"touchstart":"click",rt=window.location;t(function(){tt&&t("a.js-a").on(nt,function(t){t.preventDefault(),t.stopPropagation(),rt.href=t.currentTarget.href})});var et=void 0,ot=function(){return t('<div class="ui-dialog-wrapper ui-alert ui-row"><div class="ui-row-cell ui-row-cell-middle"><span class="loadingtip-msg js-msg"></span></div></div>').appendTo("body")};new n(".swiper-container",{pagination:".swiper-pagination",loop:!0,autoplay:5e3,lazyLoading:!0,autoplayDisableOnInteraction:!1});var it=+t(".productMore").attr("data-productLength")-4,ct=!0,at=t(".productTip"),ut=function(t,n){var r=t;return r=t.indexOf("?")<0?t+"?x-oss-process=image/resize":t+"&x-oss-process=image/resize",$(n).forEach(function(t){r=r+","+t+"_"+n[t]}),r},st=function(t){for(var n="",r=t,e=[],o=[],i=0,c=0;c<r.length;++c)if(c%2==0){e=[];for(var a=0;a<2;++a)void 0!=r[c+a]&&(e[a]=r[c+a]);o[i]=e,i++}for(a=0;a<o.length;a++){for(n+='<div class="row">',c=0;c<o[a].length;c++)3===o[a][c].product.type?(n+='<div class="col-8 tags-list">',n+='<a href="'+o[a][c].product.link+"\" onclick=\"mixpanel.track('MobileMall: Tag Products : Click',{'type':'"+o[a][c].product.name+'\'});" class="home-products-box d-block">',n+='<img src="'+ut(o[a][c].product.imgList[0],{w:320,h:320,m:"fill"})+'" alt="'+o[a][c].product.name+'"/>',n+='<div class="productlist_name overflowEllipsis">'+o[a][c].product.name+"</div>",n+='<div class="productlist_price">'+o[a][c].snapshot.priceDesc+"</div>",n+="</a>",n+="</div>"):(n+='<div class="col-8 tags-list">',n+='<a href="/product/'+o[a][c].product.id+"\" onclick=\"mixpanel.track('MobileMall: Tag Products : Click',{'type':'"+o[a][c].product.name+'\'});" class="home-products-box d-block">',n+='<img src="'+ut(o[a][c].product.imgList[0],{w:320,h:320,m:"fill"})+'" alt="'+o[a][c].product.name+'"/>',n+='<div class="productlist_name overflowEllipsis">'+o[a][c].product.name+"</div>",n+='<div class="productlist_price">',o[a][c].snapshot.scorePrice>0&&(n+='<span class="text-orange price-xinbi"><span class="icon"></span><span class="js-price-xinbi">'+o[a][c].snapshot.scorePrice+"</span></span>"),o[a][c].snapshot.price>0&&(n+='<span class="text-primary price-current-primary">&yen; <span class="js-spec-price bigger">'+o[a][c].snapshot.price+"</span></span>"),n+="</div>",n+='<del class="productlist_price_del">',n+="&yen; "+o[a][c].snapshot.originalPrice+" ",n+="</del>",n+="</a>",n+="</div>");n+="</div>"}return n},lt=function(){ct=!1;var n="/api/trade/mall/home/hot-product?offset="+it+"&size=4";at.show(),t.ajax({type:"GET",url:n,contentType:"application/json",dataType:"json",success:function(n){if(n.length<=0)return at.html("没有更多数据"),!1;at.hide(),ct=!0;var e=st(n);t(".productMore").append(e),new r},error:function(){o("网络错误，请稍后重试！")}})};t(document).ready(function(){var n=0;t(window).scroll(function(){var r=t(window).scrollTop();n=parseFloat(t(window).height())+parseFloat(r),t(document).height()<=n&&!0===ct&&(it+=4,lt())})}),t(".home-swiper-img").click(function(){var n=t(this).attr("data-type"),r=t(this).attr("data-objId");xksTrack.track("MobileMall:Homepage:TopBanners:Click",{bannerType:n,bannerId:r})}),t(".home-products-box").click(function(){var n=t(this).attr("data-link"),r=t(this).attr("data-productId");n?xksTrack.track("MobileMall:Homepage:Product:Click",{productLink:n}):xksTrack.track("MobileMall:Homepage:Product:Click",{productId:r})})});
