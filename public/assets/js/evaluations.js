define(["jquery","lazyload","jsonlylightbox"],function(t,n,e){"use strict";function r(t){u||(u=a()),u.find(".js-msg").html(t),u.fadeIn(),setTimeout(function(){u.fadeOut()},2e3)}function i(t){s||(s=f()),t?s.fadeIn():s.hide()}function o(t){return t&&t.__esModule?t.default:t}function c(t,n){return n={exports:{}},t(n,n.exports),n.exports}t="default"in t?t.default:t,n="default"in n?n.default:n;var u=void 0,a=function(){return t('<div class="ui-dialog-wrapper ui-alert ui-row"><div class="ui-row-cell ui-row-cell-middle"><span class="loadingtip-msg js-msg"></span></div></div>').appendTo("body")},s=void 0,f=function(){return t('<div class="ui-dialog-wrapper ui-alert ui-row"><div class="ui-row-cell ui-row-cell-middle"><span class="loadingtip-msg js-msg" style="padding:1rem;border-radius: 5px;"><div class="spinner"><div class="spinner-container container1"><div class="circle1"></div><div class="circle2"></div><div class="circle3"></div><div class="circle4"></div></div><div class="spinner-container container2"><div class="circle1"></div><div class="circle2"></div><div class="circle3"></div><div class="circle4"></div></div><div class="spinner-container container3"><div class="circle1"></div><div class="circle2"></div><div class="circle3"></div><div class="circle4"></div></div></div></span></div></div>').appendTo("body")},l=c(function(t){var n=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)}),d=l.JSON||(l.JSON={stringify:JSON.stringify}),v=function(t){return d.stringify.apply(d,arguments)},p=c(function(t){t.exports={default:v,__esModule:!0}}),h=o(p),y=Math.ceil,m=Math.floor,_=function(t){return isNaN(t=+t)?0:(t>0?m:y)(t)},g=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t},w=c(function(t){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)}),j=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},b=function(t,n,e){if(j(t),void 0===n)return t;switch(e){case 1:return function(e){return t.call(n,e)};case 2:return function(e,r){return t.call(n,e,r)};case 3:return function(e,r,i){return t.call(n,e,r,i)}}return function(){return t.apply(n,arguments)}},O=function(t){return"object"==typeof t?null!==t:"function"==typeof t},P=function(t){if(!O(t))throw TypeError(t+" is not an object!");return t},S=function(t){try{return!!t()}catch(t){return!0}},T=!S(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),x=w.document,E=O(x)&&O(x.createElement),M=function(t){return E?x.createElement(t):{}},k=!T&&!S(function(){return 7!=Object.defineProperty(M("div"),"a",{get:function(){return 7}}).a}),A=function(t,n){if(!O(t))return t;var e,r;if(n&&"function"==typeof(e=t.toString)&&!O(r=e.call(t)))return r;if("function"==typeof(e=t.valueOf)&&!O(r=e.call(t)))return r;if(!n&&"function"==typeof(e=t.toString)&&!O(r=e.call(t)))return r;throw TypeError("Can't convert object to primitive value")},I=Object.defineProperty,F=T?Object.defineProperty:function(t,n,e){if(P(t),n=A(n,!0),P(e),k)try{return I(t,n,e)}catch(t){}if("get"in e||"set"in e)throw TypeError("Accessors not supported!");return"value"in e&&(t[n]=e.value),t},R={f:F},N=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}},C=T?function(t,n,e){return R.f(t,n,N(1,e))}:function(t,n,e){return t[n]=e,t},L=function(t,n,e){var r,i,o,c=t&L.F,u=t&L.G,a=t&L.S,s=t&L.P,f=t&L.B,d=t&L.W,v=u?l:l[n]||(l[n]={}),p=v.prototype,h=u?w:a?w[n]:(w[n]||{}).prototype;u&&(e=n);for(r in e)(i=!c&&h&&void 0!==h[r])&&r in v||(o=i?h[r]:e[r],v[r]=u&&"function"!=typeof h[r]?e[r]:f&&i?b(o,w):d&&h[r]==o?function(t){var n=function(n,e,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(n);case 2:return new t(n,e)}return new t(n,e,r)}return t.apply(this,arguments)};return n.prototype=t.prototype,n}(o):s&&"function"==typeof o?b(Function.call,o):o,s&&((v.virtual||(v.virtual={}))[r]=o,t&L.R&&p&&!p[r]&&C(p,r,o)))};L.F=1,L.G=2,L.S=4,L.P=8,L.B=16,L.W=32,L.U=64,L.R=128;var W=L,B=C,J={}.hasOwnProperty,G=function(t,n){return J.call(t,n)},U={},z={}.toString,D=function(t){return z.call(t).slice(8,-1)},K=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==D(t)?t.split(""):Object(t)},q=function(t){return K(g(t))},H=Math.min,Q=function(t){return t>0?H(_(t),9007199254740991):0},V=Math.max,X=Math.min,Y=function(t,n){return t=_(t),t<0?V(t+n,0):X(t,n)},Z=w["__core-js_shared__"]||(w["__core-js_shared__"]={}),$=function(t){return Z[t]||(Z[t]={})},tt=0,nt=Math.random(),et=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++tt+nt).toString(36))},rt=$("keys"),it=function(t){return rt[t]||(rt[t]=et(t))},ot=function(t){return function(n,e,r){var i,o=q(n),c=Q(o.length),u=Y(r,c);if(t&&e!=e){for(;c>u;)if((i=o[u++])!=i)return!0}else for(;c>u;u++)if((t||u in o)&&o[u]===e)return t||u||0;return!t&&-1}}(!1),ct=it("IE_PROTO"),ut=function(t,n){var e,r=q(t),i=0,o=[];for(e in r)e!=ct&&G(r,e)&&o.push(e);for(;n.length>i;)G(r,e=n[i++])&&(~ot(o,e)||o.push(e));return o},at="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),st=Object.keys||function(t){return ut(t,at)},ft=T?Object.defineProperties:function(t,n){P(t);for(var e,r=st(n),i=r.length,o=0;i>o;)R.f(t,e=r[o++],n[e]);return t},lt=w.document&&document.documentElement,dt=it("IE_PROTO"),vt=function(){},pt=function(){var t,n=M("iframe"),e=at.length;for(n.style.display="none",lt.appendChild(n),n.src="javascript:",t=n.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),pt=t.F;e--;)delete pt.prototype[at[e]];return pt()},ht=Object.create||function(t,n){var e;return null!==t?(vt.prototype=P(t),e=new vt,vt.prototype=null,e[dt]=t):e=pt(),void 0===n?e:ft(e,n)},yt=c(function(t){var n=$("wks"),e=w.Symbol,r="function"==typeof e;(t.exports=function(t){return n[t]||(n[t]=r&&e[t]||(r?e:et)("Symbol."+t))}).store=n}),mt=R.f,_t=yt("toStringTag"),gt=function(t,n,e){t&&!G(t=e?t:t.prototype,_t)&&mt(t,_t,{configurable:!0,value:n})},wt={};C(wt,yt("iterator"),function(){return this});var jt=function(t,n,e){t.prototype=ht(wt,{next:N(1,e)}),gt(t,n+" Iterator")},bt=function(t){return Object(g(t))},Ot=it("IE_PROTO"),Pt=Object.prototype,St=Object.getPrototypeOf||function(t){return t=bt(t),G(t,Ot)?t[Ot]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Pt:null},Tt=yt("iterator"),xt=!([].keys&&"next"in[].keys()),Et=function(){return this},Mt=function(t,n,e,r,i,o,c){jt(e,n,r);var u,a,s,f=function(t){if(!xt&&t in p)return p[t];switch(t){case"keys":case"values":return function(){return new e(this,t)}}return function(){return new e(this,t)}},l=n+" Iterator",d="values"==i,v=!1,p=t.prototype,h=p[Tt]||p["@@iterator"]||i&&p[i],y=h||f(i),m=i?d?f("entries"):y:void 0,_="Array"==n?p.entries||h:h;if(_&&(s=St(_.call(new t)))!==Object.prototype&&gt(s,l,!0),d&&h&&"values"!==h.name&&(v=!0,y=function(){return h.call(this)}),c&&(xt||v||!p[Tt])&&C(p,Tt,y),U[n]=y,U[l]=Et,i)if(u={values:d?y:f("values"),keys:o?y:f("keys"),entries:m},c)for(a in u)a in p||B(p,a,u[a]);else W(W.P+W.F*(xt||v),n,u);return u},kt=function(t){return function(n,e){var r,i,o=String(g(n)),c=_(e),u=o.length;return c<0||c>=u?t?"":void 0:(r=o.charCodeAt(c),r<55296||r>56319||c+1===u||(i=o.charCodeAt(c+1))<56320||i>57343?t?o.charAt(c):r:t?o.slice(c,c+2):i-56320+(r-55296<<10)+65536)}}(!0);Mt(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,n=this._t,e=this._i;return e>=n.length?{value:void 0,done:!0}:(t=kt(n,e),this._i+=t.length,{value:t,done:!1})});var At=function(t,n){return{value:n,done:!!t}};Mt(Array,"Array",function(t,n){this._t=q(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,e=this._i++;return!t||e>=t.length?(this._t=void 0,At(1)):"keys"==n?At(0,e):"values"==n?At(0,t[e]):At(0,[e,t[e]])},"values");U.Arguments=U.Array;for(var It=yt("toStringTag"),Ft=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],Rt=0;Rt<5;Rt++){var Nt=Ft[Rt],Ct=w[Nt],Lt=Ct&&Ct.prototype;Lt&&!Lt[It]&&C(Lt,It,Nt),U[Nt]=U.Array}var Wt,Bt,Jt,Gt=yt("toStringTag"),Ut="Arguments"==D(function(){return arguments}()),zt=function(t,n){try{return t[n]}catch(t){}},Dt=function(t){var n,e,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(e=zt(n=Object(t),Gt))?e:Ut?D(n):"Object"==(r=D(n))&&"function"==typeof n.callee?"Arguments":r},Kt=function(t,n,e,r){if(!(t instanceof n)||void 0!==r&&r in t)throw TypeError(e+": incorrect invocation!");return t},qt=function(t,n,e,r){try{return r?n(P(e)[0],e[1]):n(e)}catch(n){var i=t.return;throw void 0!==i&&P(i.call(t)),n}},Ht=yt("iterator"),Qt=Array.prototype,Vt=function(t){return void 0!==t&&(U.Array===t||Qt[Ht]===t)},Xt=yt("iterator"),Yt=l.getIteratorMethod=function(t){if(void 0!=t)return t[Xt]||t["@@iterator"]||U[Dt(t)]},Zt=c(function(t){var n={},e={},r=t.exports=function(t,r,i,o,c){var u,a,s,f,l=c?function(){return t}:Yt(t),d=b(i,o,r?2:1),v=0;if("function"!=typeof l)throw TypeError(t+" is not iterable!");if(Vt(l)){for(u=Q(t.length);u>v;v++)if((f=r?d(P(a=t[v])[0],a[1]):d(t[v]))===n||f===e)return f}else for(s=l.call(t);!(a=s.next()).done;)if((f=qt(s,d,a.value,r))===n||f===e)return f};r.BREAK=n,r.RETURN=e}),$t=yt("species"),tn=function(t,n){var e,r=P(t).constructor;return void 0===r||void 0==(e=P(r)[$t])?n:j(e)},nn=function(t,n,e){var r=void 0===e;switch(n.length){case 0:return r?t():t.call(e);case 1:return r?t(n[0]):t.call(e,n[0]);case 2:return r?t(n[0],n[1]):t.call(e,n[0],n[1]);case 3:return r?t(n[0],n[1],n[2]):t.call(e,n[0],n[1],n[2]);case 4:return r?t(n[0],n[1],n[2],n[3]):t.call(e,n[0],n[1],n[2],n[3])}return t.apply(e,n)},en=w.process,rn=w.setImmediate,on=w.clearImmediate,cn=w.MessageChannel,un=0,an={},sn=function(){var t=+this;if(an.hasOwnProperty(t)){var n=an[t];delete an[t],n()}},fn=function(t){sn.call(t.data)};rn&&on||(rn=function(t){for(var n=[],e=1;arguments.length>e;)n.push(arguments[e++]);return an[++un]=function(){nn("function"==typeof t?t:Function(t),n)},Wt(un),un},on=function(t){delete an[t]},"process"==D(en)?Wt=function(t){en.nextTick(b(sn,t,1))}:cn?(Bt=new cn,Jt=Bt.port2,Bt.port1.onmessage=fn,Wt=b(Jt.postMessage,Jt,1)):w.addEventListener&&"function"==typeof postMessage&&!w.importScripts?(Wt=function(t){w.postMessage(t+"","*")},w.addEventListener("message",fn,!1)):Wt="onreadystatechange"in M("script")?function(t){lt.appendChild(M("script")).onreadystatechange=function(){lt.removeChild(this),sn.call(t)}}:function(t){setTimeout(b(sn,t,1),0)});var ln={set:rn,clear:on},dn=ln.set,vn=w.MutationObserver||w.WebKitMutationObserver,pn=w.process,hn=w.Promise,yn="process"==D(pn),mn=yt("species"),_n=yt("iterator"),gn=!1;try{var wn=[7][_n]();wn.return=function(){gn=!0},Array.from(wn,function(){throw 2})}catch(t){}var jn,bn,On,Pn=ln.set,Sn=function(){var t,n,e,r=function(){var r,i;for(yn&&(r=pn.domain)&&r.exit();t;){i=t.fn,t=t.next;try{i()}catch(r){throw t?e():n=void 0,r}}n=void 0,r&&r.enter()};if(yn)e=function(){pn.nextTick(r)};else if(vn){var i=!0,o=document.createTextNode("");new vn(r).observe(o,{characterData:!0}),e=function(){o.data=i=!i}}else if(hn&&hn.resolve){var c=hn.resolve();e=function(){c.then(r)}}else e=function(){dn.call(w,r)};return function(r){var i={fn:r,next:void 0};n&&(n.next=i),t||(t=i,e()),n=i}}(),Tn=w.TypeError,xn=w.process,En=w.Promise,xn=w.process,Mn="process"==Dt(xn),kn=function(){},An=!!function(){try{var t=En.resolve(1),n=(t.constructor={})[yt("species")]=function(t){t(kn,kn)};return(Mn||"function"==typeof PromiseRejectionEvent)&&t.then(kn)instanceof n}catch(t){}}(),In=function(t,n){return t===n||t===En&&n===On},Fn=function(t){var n;return!(!O(t)||"function"!=typeof(n=t.then))&&n},Rn=function(t){return In(En,t)?new Nn(t):new bn(t)},Nn=bn=function(t){var n,e;this.promise=new t(function(t,r){if(void 0!==n||void 0!==e)throw Tn("Bad Promise constructor");n=t,e=r}),this.resolve=j(n),this.reject=j(e)},Cn=function(t){try{t()}catch(t){return{error:t}}},Ln=function(t,n){if(!t._n){t._n=!0;var e=t._c;Sn(function(){for(var r=t._v,i=1==t._s,o=0;e.length>o;)!function(n){var e,o,c=i?n.ok:n.fail,u=n.resolve,a=n.reject,s=n.domain;try{c?(i||(2==t._h&&Jn(t),t._h=1),!0===c?e=r:(s&&s.enter(),e=c(r),s&&s.exit()),e===n.promise?a(Tn("Promise-chain cycle")):(o=Fn(e))?o.call(e,u,a):u(e)):a(r)}catch(t){a(t)}}(e[o++]);t._c=[],t._n=!1,n&&!t._h&&Wn(t)})}},Wn=function(t){Pn.call(w,function(){var n,e,r,i=t._v;if(Bn(t)&&(n=Cn(function(){Mn?xn.emit("unhandledRejection",i,t):(e=w.onunhandledrejection)?e({promise:t,reason:i}):(r=w.console)&&r.error&&r.error("Unhandled promise rejection",i)}),t._h=Mn||Bn(t)?2:1),t._a=void 0,n)throw n.error})},Bn=function(t){if(1==t._h)return!1;for(var n,e=t._a||t._c,r=0;e.length>r;)if(n=e[r++],n.fail||!Bn(n.promise))return!1;return!0},Jn=function(t){Pn.call(w,function(){var n;Mn?xn.emit("rejectionHandled",t):(n=w.onrejectionhandled)&&n({promise:t,reason:t._v})})},Gn=function(t){var n=this;n._d||(n._d=!0,n=n._w||n,n._v=t,n._s=2,n._a||(n._a=n._c.slice()),Ln(n,!0))},Un=function(t){var n,e=this;if(!e._d){e._d=!0,e=e._w||e;try{if(e===t)throw Tn("Promise can't be resolved itself");(n=Fn(t))?Sn(function(){var r={_w:e,_d:!1};try{n.call(t,b(Un,r,1),b(Gn,r,1))}catch(t){Gn.call(r,t)}}):(e._v=t,e._s=1,Ln(e,!1))}catch(t){Gn.call({_w:e,_d:!1},t)}}};An||(En=function(t){Kt(this,En,"Promise","_h"),j(t),jn.call(this);try{t(b(Un,this,1),b(Gn,this,1))}catch(t){Gn.call(this,t)}},jn=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},jn.prototype=function(t,n,e){for(var r in n)e&&t[r]?t[r]=n[r]:C(t,r,n[r]);return t}(En.prototype,{then:function(t,n){var e=Rn(tn(this,En));return e.ok="function"!=typeof t||t,e.fail="function"==typeof n&&n,e.domain=Mn?xn.domain:void 0,this._c.push(e),this._a&&this._a.push(e),this._s&&Ln(this,!1),e.promise},catch:function(t){return this.then(void 0,t)}}),Nn=function(){var t=new jn;this.promise=t,this.resolve=b(Un,t,1),this.reject=b(Gn,t,1)}),W(W.G+W.W+W.F*!An,{Promise:En}),gt(En,"Promise"),function(t){var n="function"==typeof l[t]?l[t]:w[t];T&&n&&!n[mn]&&R.f(n,mn,{configurable:!0,get:function(){return this}})}("Promise"),On=l.Promise,W(W.S+W.F*!An,"Promise",{reject:function(t){var n=Rn(this);return(0,n.reject)(t),n.promise}}),W(W.S+!0*W.F,"Promise",{resolve:function(t){if(t instanceof En&&In(t.constructor,this))return t;var n=Rn(this);return(0,n.resolve)(t),n.promise}}),W(W.S+W.F*!(An&&function(t,n){if(!n&&!gn)return!1;var e=!1;try{var r=[7],i=r[_n]();i.next=function(){return{done:e=!0}},r[_n]=function(){return i},t(r)}catch(t){}return e}(function(t){En.all(t).catch(kn)})),"Promise",{all:function(t){var n=this,e=Rn(n),r=e.resolve,i=e.reject,o=Cn(function(){var e=[],o=0,c=1;Zt(t,!1,function(t){var u=o++,a=!1;e.push(void 0),c++,n.resolve(t).then(function(t){a||(a=!0,e[u]=t,--c||r(e))},i)}),--c||r(e)});return o&&i(o.error),e.promise},race:function(t){var n=this,e=Rn(n),r=e.reject,i=Cn(function(){Zt(t,!1,function(t){n.resolve(t).then(e.resolve,r)})});return i&&r(i.error),e.promise}});var zn=l.Promise,Dn=c(function(t){t.exports={default:zn,__esModule:!0}}),Kn=o(Dn),qn=function(n,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments[4];return new Kn(function(c,u){t.ajax({method:r,url:n,headers:o,async:i,contentType:"application/json",dataType:"json",data:h(e),success:c,error:function(t){try{u(JSON.parse(t.responseText))}catch(n){u({error:!0,message:"解析JSON出错: "+t.responseText})}}})})};t(function(){new n,(new Lightbox).load()}),function(){var n="";t(".commentReply").click(function(){n=t(this).attr("data-commentId"),t(".commentPopWrap").show()}),t(".commentPopBg,.commentCancelBtn").click(function(){t(".commentPopWrap").hide()}),t(".commentOkBtn").click(function(){var e=t(".replyText").val();if(e){t(".commentPopWrap").hide();var o="/api/trade/comment/"+n+"/reply",c={content:e};i(!0),qn(o,c,"POST").then(function(){i(!1),t(".replyText").val(""),r("回复成功！"),location.reload(!0)}).catch(function(){i(!1),t(".replyText").val(""),r("网络错误，请稍后重试！")})}else r("请输入要回复的内容")})}()});
