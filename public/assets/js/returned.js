define(["jquery","vue"],function(t,e){"use strict";function n(e,n){e=t.extend({msg:"",onebutton:!1},e),p?p.find(".js-dialog-cancel").off().on(l,function(t){v(t),p.hide()}).end().find(".js-dialog-ok").off().on(l,function(t){v(t),n&&"function"==typeof n&&n(),p.hide()}).end():p=t(d).find(".js-dialog-cancel").off().on(l,function(t){v(t),p.hide()}).end().find(".js-dialog-ok").off().on(l,function(t){v(t),n&&"function"==typeof n&&n(),p.hide()}).end().appendTo("body"),e.msg&&(p.hide(),p.find(".js-msg").html(e.msg),e.onebutton?p.find(".js-dialog-cancel").hide():p.find(".js-dialog-cancel").show(),p.show())}function r(t){h||(h=y()),h.find(".js-msg").html(t),h.fadeIn(),setTimeout(function(){h.fadeOut()},2e3)}function i(t){g||(g=m()),t?g.fadeIn():g.hide()}function o(){t(".js-customer").click(function(){var e=t(".customer-pop").attr("data-url");t(".customer-pop iframe").attr("src",e),t(".js-spec-dialogBg,.customer-pop,.iframe-close").show()}),t(".js-spec-dialogBg,.iframe-close").click(function(){t(".js-spec-dialogBg,.customer-pop,.iframe-close").hide()})}function c(t){return t&&t.__esModule?t.default:t}function s(t,e){return e={exports:{}},t(e,e.exports),e.exports}t="default"in t?t.default:t,e="default"in e?e.default:e;var a="ontouchstart"in window,u=a?"touchstart":"click",f=window.location;t(function(){a&&t("a.js-a").on(u,function(t){t.preventDefault(),t.stopPropagation(),f.href=t.currentTarget.href})});var l=u,d='<div class="ui-dialog-wrapper ui-alert ui-row"><div class="ui-row-cell ui-row-cell-middle"><div class="ui-dialog"><div class="ui-dialog-msg js-msg"></div><div class="ui-dialog-btns js-btns"><span class="ui-dialog-button ui-touchable js-dialog-cancel">取消</span><span class="ui-dialog-button ui-touchable js-dialog-ok">确定</span></div></div></div></div>',p=void 0,v=function(t){t.preventDefault(),t.stopPropagation()},h=void 0,y=function(){return t('<div class="ui-dialog-wrapper ui-alert ui-row"><div class="ui-row-cell ui-row-cell-middle"><span class="loadingtip-msg js-msg"></span></div></div>').appendTo("body")},g=void 0,m=function(){return t('<div class="ui-dialog-wrapper ui-alert ui-row"><div class="ui-row-cell ui-row-cell-middle"><span class="loadingtip-msg js-msg" style="padding:1rem;border-radius: 5px;"><div class="spinner"><div class="spinner-container container1"><div class="circle1"></div><div class="circle2"></div><div class="circle3"></div><div class="circle4"></div></div><div class="spinner-container container2"><div class="circle1"></div><div class="circle2"></div><div class="circle3"></div><div class="circle4"></div></div><div class="spinner-container container3"><div class="circle1"></div><div class="circle2"></div><div class="circle3"></div><div class="circle4"></div></div></div></span></div></div>').appendTo("body")},_=s(function(t){var e=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=e)}),w=_.JSON||(_.JSON={stringify:JSON.stringify}),b=function(t){return w.stringify.apply(w,arguments)},j=s(function(t){t.exports={default:b,__esModule:!0}}),O=c(j),S=Math.ceil,k=Math.floor,M=function(t){return isNaN(t=+t)?0:(t>0?k:S)(t)},P=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t},T=s(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),x=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},I=function(t,e,n){if(x(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}},A=function(t){return"object"==typeof t?null!==t:"function"==typeof t},E=function(t){if(!A(t))throw TypeError(t+" is not an object!");return t},F=function(t){try{return!!t()}catch(t){return!0}},C=!F(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),N=T.document,R=A(N)&&A(N.createElement),L=function(t){return R?N.createElement(t):{}},B=!C&&!F(function(){return 7!=Object.defineProperty(L("div"),"a",{get:function(){return 7}}).a}),J=function(t,e){if(!A(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!A(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!A(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!A(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},W=Object.defineProperty,D=C?Object.defineProperty:function(t,e,n){if(E(t),e=J(e,!0),E(n),B)try{return W(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t},G={f:D},U=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},V=C?function(t,e,n){return G.f(t,e,U(1,n))}:function(t,e,n){return t[e]=n,t},K=function(t,e,n){var r,i,o,c=t&K.F,s=t&K.G,a=t&K.S,u=t&K.P,f=t&K.B,l=t&K.W,d=s?_:_[e]||(_[e]={}),p=d.prototype,v=s?T:a?T[e]:(T[e]||{}).prototype;s&&(n=e);for(r in n)(i=!c&&v&&void 0!==v[r])&&r in d||(o=i?v[r]:n[r],d[r]=s&&"function"!=typeof v[r]?n[r]:f&&i?I(o,T):l&&v[r]==o?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(o):u&&"function"==typeof o?I(Function.call,o):o,u&&((d.virtual||(d.virtual={}))[r]=o,t&K.R&&p&&!p[r]&&V(p,r,o)))};K.F=1,K.G=2,K.S=4,K.P=8,K.B=16,K.W=32,K.U=64,K.R=128;var q=K,z=V,H={}.hasOwnProperty,Y=function(t,e){return H.call(t,e)},Q={},X={}.toString,Z=function(t){return X.call(t).slice(8,-1)},$=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==Z(t)?t.split(""):Object(t)},tt=function(t){return $(P(t))},et=Math.min,nt=function(t){return t>0?et(M(t),9007199254740991):0},rt=Math.max,it=Math.min,ot=function(t,e){return t=M(t),t<0?rt(t+e,0):it(t,e)},ct=T["__core-js_shared__"]||(T["__core-js_shared__"]={}),st=function(t){return ct[t]||(ct[t]={})},at=0,ut=Math.random(),ft=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++at+ut).toString(36))},lt=st("keys"),dt=function(t){return lt[t]||(lt[t]=ft(t))},pt=function(t){return function(e,n,r){var i,o=tt(e),c=nt(o.length),s=ot(r,c);if(t&&n!=n){for(;c>s;)if((i=o[s++])!=i)return!0}else for(;c>s;s++)if((t||s in o)&&o[s]===n)return t||s||0;return!t&&-1}}(!1),vt=dt("IE_PROTO"),ht=function(t,e){var n,r=tt(t),i=0,o=[];for(n in r)n!=vt&&Y(r,n)&&o.push(n);for(;e.length>i;)Y(r,n=e[i++])&&(~pt(o,n)||o.push(n));return o},yt="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),gt=Object.keys||function(t){return ht(t,yt)},mt=C?Object.defineProperties:function(t,e){E(t);for(var n,r=gt(e),i=r.length,o=0;i>o;)G.f(t,n=r[o++],e[n]);return t},_t=T.document&&document.documentElement,wt=dt("IE_PROTO"),bt=function(){},jt=function(){var t,e=L("iframe"),n=yt.length;for(e.style.display="none",_t.appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),jt=t.F;n--;)delete jt.prototype[yt[n]];return jt()},Ot=Object.create||function(t,e){var n;return null!==t?(bt.prototype=E(t),n=new bt,bt.prototype=null,n[wt]=t):n=jt(),void 0===e?n:mt(n,e)},St=s(function(t){var e=st("wks"),n=T.Symbol,r="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=r&&n[t]||(r?n:ft)("Symbol."+t))}).store=e}),kt=G.f,Mt=St("toStringTag"),Pt=function(t,e,n){t&&!Y(t=n?t:t.prototype,Mt)&&kt(t,Mt,{configurable:!0,value:e})},Tt={};V(Tt,St("iterator"),function(){return this});var xt=function(t,e,n){t.prototype=Ot(Tt,{next:U(1,n)}),Pt(t,e+" Iterator")},It=function(t){return Object(P(t))},At=dt("IE_PROTO"),Et=Object.prototype,Ft=Object.getPrototypeOf||function(t){return t=It(t),Y(t,At)?t[At]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Et:null},Ct=St("iterator"),Nt=!([].keys&&"next"in[].keys()),Rt=function(){return this},Lt=function(t,e,n,r,i,o,c){xt(n,e,r);var s,a,u,f=function(t){if(!Nt&&t in v)return v[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},l=e+" Iterator",d="values"==i,p=!1,v=t.prototype,h=v[Ct]||v["@@iterator"]||i&&v[i],y=h||f(i),g=i?d?f("entries"):y:void 0,m="Array"==e?v.entries||h:h;if(m&&(u=Ft(m.call(new t)))!==Object.prototype&&Pt(u,l,!0),d&&h&&"values"!==h.name&&(p=!0,y=function(){return h.call(this)}),c&&(Nt||p||!v[Ct])&&V(v,Ct,y),Q[e]=y,Q[l]=Rt,i)if(s={values:d?y:f("values"),keys:o?y:f("keys"),entries:g},c)for(a in s)a in v||z(v,a,s[a]);else q(q.P+q.F*(Nt||p),e,s);return s},Bt=function(t){return function(e,n){var r,i,o=String(P(e)),c=M(n),s=o.length;return c<0||c>=s?t?"":void 0:(r=o.charCodeAt(c),r<55296||r>56319||c+1===s||(i=o.charCodeAt(c+1))<56320||i>57343?t?o.charAt(c):r:t?o.slice(c,c+2):i-56320+(r-55296<<10)+65536)}}(!0);Lt(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=Bt(e,n),this._i+=t.length,{value:t,done:!1})});var Jt=function(t,e){return{value:e,done:!!t}};Lt(Array,"Array",function(t,e){this._t=tt(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,Jt(1)):"keys"==e?Jt(0,n):"values"==e?Jt(0,t[n]):Jt(0,[n,t[n]])},"values");Q.Arguments=Q.Array;for(var Wt=St("toStringTag"),Dt=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],Gt=0;Gt<5;Gt++){var Ut=Dt[Gt],Vt=T[Ut],Kt=Vt&&Vt.prototype;Kt&&!Kt[Wt]&&V(Kt,Wt,Ut),Q[Ut]=Q.Array}var qt,zt,Ht,Yt=St("toStringTag"),Qt="Arguments"==Z(function(){return arguments}()),Xt=function(t,e){try{return t[e]}catch(t){}},Zt=function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=Xt(e=Object(t),Yt))?n:Qt?Z(e):"Object"==(r=Z(e))&&"function"==typeof e.callee?"Arguments":r},$t=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t},te=function(t,e,n,r){try{return r?e(E(n)[0],n[1]):e(n)}catch(e){var i=t.return;throw void 0!==i&&E(i.call(t)),e}},ee=St("iterator"),ne=Array.prototype,re=function(t){return void 0!==t&&(Q.Array===t||ne[ee]===t)},ie=St("iterator"),oe=_.getIteratorMethod=function(t){if(void 0!=t)return t[ie]||t["@@iterator"]||Q[Zt(t)]},ce=s(function(t){var e={},n={},r=t.exports=function(t,r,i,o,c){var s,a,u,f,l=c?function(){return t}:oe(t),d=I(i,o,r?2:1),p=0;if("function"!=typeof l)throw TypeError(t+" is not iterable!");if(re(l)){for(s=nt(t.length);s>p;p++)if((f=r?d(E(a=t[p])[0],a[1]):d(t[p]))===e||f===n)return f}else for(u=l.call(t);!(a=u.next()).done;)if((f=te(u,d,a.value,r))===e||f===n)return f};r.BREAK=e,r.RETURN=n}),se=St("species"),ae=function(t,e){var n,r=E(t).constructor;return void 0===r||void 0==(n=E(r)[se])?e:x(n)},ue=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)},fe=T.process,le=T.setImmediate,de=T.clearImmediate,pe=T.MessageChannel,ve=0,he={},ye=function(){var t=+this;if(he.hasOwnProperty(t)){var e=he[t];delete he[t],e()}},ge=function(t){ye.call(t.data)};le&&de||(le=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return he[++ve]=function(){ue("function"==typeof t?t:Function(t),e)},qt(ve),ve},de=function(t){delete he[t]},"process"==Z(fe)?qt=function(t){fe.nextTick(I(ye,t,1))}:pe?(zt=new pe,Ht=zt.port2,zt.port1.onmessage=ge,qt=I(Ht.postMessage,Ht,1)):T.addEventListener&&"function"==typeof postMessage&&!T.importScripts?(qt=function(t){T.postMessage(t+"","*")},T.addEventListener("message",ge,!1)):qt="onreadystatechange"in L("script")?function(t){_t.appendChild(L("script")).onreadystatechange=function(){_t.removeChild(this),ye.call(t)}}:function(t){setTimeout(I(ye,t,1),0)});var me={set:le,clear:de},_e=me.set,we=T.MutationObserver||T.WebKitMutationObserver,be=T.process,je=T.Promise,Oe="process"==Z(be),Se=St("species"),ke=St("iterator"),Me=!1;try{var Pe=[7][ke]();Pe.return=function(){Me=!0},Array.from(Pe,function(){throw 2})}catch(t){}var Te,xe,Ie,Ae=me.set,Ee=function(){var t,e,n,r=function(){var r,i;for(Oe&&(r=be.domain)&&r.exit();t;){i=t.fn,t=t.next;try{i()}catch(r){throw t?n():e=void 0,r}}e=void 0,r&&r.enter()};if(Oe)n=function(){be.nextTick(r)};else if(we){var i=!0,o=document.createTextNode("");new we(r).observe(o,{characterData:!0}),n=function(){o.data=i=!i}}else if(je&&je.resolve){var c=je.resolve();n=function(){c.then(r)}}else n=function(){_e.call(T,r)};return function(r){var i={fn:r,next:void 0};e&&(e.next=i),t||(t=i,n()),e=i}}(),Fe=T.TypeError,Ce=T.process,Ne=T.Promise,Ce=T.process,Re="process"==Zt(Ce),Le=function(){},Be=!!function(){try{var t=Ne.resolve(1),e=(t.constructor={})[St("species")]=function(t){t(Le,Le)};return(Re||"function"==typeof PromiseRejectionEvent)&&t.then(Le)instanceof e}catch(t){}}(),Je=function(t,e){return t===e||t===Ne&&e===Ie},We=function(t){var e;return!(!A(t)||"function"!=typeof(e=t.then))&&e},De=function(t){return Je(Ne,t)?new Ge(t):new xe(t)},Ge=xe=function(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw Fe("Bad Promise constructor");e=t,n=r}),this.resolve=x(e),this.reject=x(n)},Ue=function(t){try{t()}catch(t){return{error:t}}},Ve=function(t,e){if(!t._n){t._n=!0;var n=t._c;Ee(function(){for(var r=t._v,i=1==t._s,o=0;n.length>o;)!function(e){var n,o,c=i?e.ok:e.fail,s=e.resolve,a=e.reject,u=e.domain;try{c?(i||(2==t._h&&ze(t),t._h=1),!0===c?n=r:(u&&u.enter(),n=c(r),u&&u.exit()),n===e.promise?a(Fe("Promise-chain cycle")):(o=We(n))?o.call(n,s,a):s(n)):a(r)}catch(t){a(t)}}(n[o++]);t._c=[],t._n=!1,e&&!t._h&&Ke(t)})}},Ke=function(t){Ae.call(T,function(){var e,n,r,i=t._v;if(qe(t)&&(e=Ue(function(){Re?Ce.emit("unhandledRejection",i,t):(n=T.onunhandledrejection)?n({promise:t,reason:i}):(r=T.console)&&r.error&&r.error("Unhandled promise rejection",i)}),t._h=Re||qe(t)?2:1),t._a=void 0,e)throw e.error})},qe=function(t){if(1==t._h)return!1;for(var e,n=t._a||t._c,r=0;n.length>r;)if(e=n[r++],e.fail||!qe(e.promise))return!1;return!0},ze=function(t){Ae.call(T,function(){var e;Re?Ce.emit("rejectionHandled",t):(e=T.onrejectionhandled)&&e({promise:t,reason:t._v})})},He=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),Ve(e,!0))},Ye=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw Fe("Promise can't be resolved itself");(e=We(t))?Ee(function(){var r={_w:n,_d:!1};try{e.call(t,I(Ye,r,1),I(He,r,1))}catch(t){He.call(r,t)}}):(n._v=t,n._s=1,Ve(n,!1))}catch(t){He.call({_w:n,_d:!1},t)}}};Be||(Ne=function(t){$t(this,Ne,"Promise","_h"),x(t),Te.call(this);try{t(I(Ye,this,1),I(He,this,1))}catch(t){He.call(this,t)}},Te=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},Te.prototype=function(t,e,n){for(var r in e)n&&t[r]?t[r]=e[r]:V(t,r,e[r]);return t}(Ne.prototype,{then:function(t,e){var n=De(ae(this,Ne));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=Re?Ce.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&Ve(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),Ge=function(){var t=new Te;this.promise=t,this.resolve=I(Ye,t,1),this.reject=I(He,t,1)}),q(q.G+q.W+q.F*!Be,{Promise:Ne}),Pt(Ne,"Promise"),function(t){var e="function"==typeof _[t]?_[t]:T[t];C&&e&&!e[Se]&&G.f(e,Se,{configurable:!0,get:function(){return this}})}("Promise"),Ie=_.Promise,q(q.S+q.F*!Be,"Promise",{reject:function(t){var e=De(this);return(0,e.reject)(t),e.promise}}),q(q.S+!0*q.F,"Promise",{resolve:function(t){if(t instanceof Ne&&Je(t.constructor,this))return t;var e=De(this);return(0,e.resolve)(t),e.promise}}),q(q.S+q.F*!(Be&&function(t,e){if(!e&&!Me)return!1;var n=!1;try{var r=[7],i=r[ke]();i.next=function(){return{done:n=!0}},r[ke]=function(){return i},t(r)}catch(t){}return n}(function(t){Ne.all(t).catch(Le)})),"Promise",{all:function(t){var e=this,n=De(e),r=n.resolve,i=n.reject,o=Ue(function(){var n=[],o=0,c=1;ce(t,!1,function(t){var s=o++,a=!1;n.push(void 0),c++,e.resolve(t).then(function(t){a||(a=!0,n[s]=t,--c||r(n))},i)}),--c||r(n)});return o&&i(o.error),n.promise},race:function(t){var e=this,n=De(e),r=n.reject,i=Ue(function(){ce(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return i&&r(i.error),n.promise}});var Qe=_.Promise,Xe=s(function(t){t.exports={default:Qe,__esModule:!0}}),Ze=c(Xe),$e=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments[4];return new Ze(function(c,s){t.ajax({method:r,url:e,headers:o,async:i,contentType:"application/json",dataType:"json",data:O(n),success:c,error:function(t){try{s(JSON.parse(t.responseText))}catch(e){s({error:!0,message:"解析JSON出错: "+t.responseText})}}})})};new e({el:"#returned",data:{type:"",subOrderId:"",orderId:"",retMsg:"",code:""},created:function(){var e=t(".returned-select").attr("data-type"),n=t(".returned-textarea").attr("data-retMsg");e&&(this.type=e),n&&(this.retMsg=n);for(var r=window.location.search.substr(1).split("&&"),i=0;i<r.length;i++)"subOrderId"===r[i].split("=")[0]?this.subOrderId=r[i].split("=")[1]:"orderId"===r[i].split("=")[0]?this.orderId=r[i].split("=")[1]:"code"===r[i].split("=")[0]&&(this.code=r[i].split("=")[1]);o()},methods:{selectVar:function(e){this.type=t(e.target).val()},backInfo:function(){window.history.back()},returned_btn:function(t){if(this.type)if(this.retMsg){i(!0);var e={orderId:this.orderId,subOrderId:this.subOrderId,reason:this.retMsg,type:this.type,status:"APPLY"};$e("/api/trade/mall/after-sale-order",e,"POST").then(function(e){e.success?(i(!1),!0===t?xksTrack.track("MobileMall:Apply_After_Sale:Submit",{state:"success"}):xksTrack.track("MobileMall:Change_After_Sale:View",{state:"success"}),n({msg:"提交成功!",onebutton:!0},function(){location.href="/gp/order/"+e.data.orderId})):(i(!1),!0===t?xksTrack.track("MobileMall:Apply_After_Sale:Submit",{state:"fail"}):xksTrack.track("MobileMall:Change_After_Sale:View",{state:"fail"}),r(e.retMsg))}).catch(function(){i(!1),r("网络错误，请稍后重试！")})}else r("请填写售后原因!");else r("请选择售后类型!")}}})});
